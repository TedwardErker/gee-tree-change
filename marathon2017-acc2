/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var grass = /* color: #dde026 */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-89.62259908319089, 45.014022375149935],
             [-89.62257494330976, 45.01398255611301],
             [-89.62254007459256, 45.01395601007299],
             [-90.33764578986013, 45.006421437268536],
             [-90.33835389304006, 45.006118013167615],
             [-90.32099783504884, 45.0085835852891],
             [-90.32106757248323, 45.00842808650779],
             [-90.32083690250795, 45.00836740394203],
             [-90.316703618416, 45.00838447092015],
             [-90.3158560403673, 45.00827069096996],
             [-90.31702548349779, 45.00824793495281],
             [-90.3251874455301, 45.00630700305379],
             [-90.3251338013498, 45.006326915243996],
             [-90.32508418048303, 45.00634682742728],
             [-90.32512039030473, 45.00637811798703],
             [-90.32524377191942, 45.0063657914049],
             [-90.32570377076547, 45.00639897835069],
             [-90.32566353763025, 45.00638854816981],
             [-90.32559245909135, 45.00636863600103],
             [-90.32557100141923, 45.00633829363529],
             [-90.32544493759553, 45.006305106654345],
             [-90.32575205052774, 45.00624537004025],
             [-90.32573327506464, 45.00631743324952],
             [-90.32572120512407, 45.00635156842227],
             [-90.32575339163225, 45.00619890818619],
             [-90.29614303547912, 45.007582072378725],
             [-90.28999004799896, 45.00652768808027],
             [-90.29002223450713, 45.0063759765121],
             [-90.28839145142608, 45.00730520356069],
             [-90.28839681584411, 45.00763517035526],
             [-90.28899226624542, 45.00775274427104],
             [-90.28893325764709, 45.00778308588753],
             [-90.28908346135192, 45.00779446398958],
             [-90.28902981717162, 45.00774895156784],
             [-90.13025545752502, 44.667452322883236],
             [-90.1302876440332, 44.66736075876991],
             [-90.13027691519714, 44.66723104269507],
             [-90.13034665263153, 44.66736457394418],
             [-90.13025545752502, 44.66765071129929],
             [-90.13027155077911, 44.66780713245628],
             [-90.13023936427093, 44.66804748609441],
             [-90.13035201704956, 44.6682344271239],
             [-90.13030910170532, 44.6681619398575],
             [-90.1302339998529, 44.66544360192918],
             [-90.13021254218079, 44.665107854505365],
             [-90.13033055937744, 44.664985764050954],
             [-90.13026618636108, 44.66471105958835],
             [-90.13019108450867, 44.66534440402909],
             [-90.13024472868896, 44.66569541122088],
             [-90.11515998518921, 44.666504245788495],
             [-90.13029837286926, 44.66497813338901],
             [-90.10643555547078, 44.66341379215386],
             [-90.10639264012654, 44.66322302013109],
             [-90.10630680943807, 44.663024616561486],
             [-90.10628535176595, 44.662749902805665],
             [-90.10624243642171, 44.66234546074066],
             [-90.1025302591451, 44.661864705181834],
             [-90.10255171681722, 44.66175787007182],
             [-90.10245515729268, 44.66156709259998],
             [-90.09945349262728, 44.66248068030246],
             [-90.09944812820925, 44.66261040700735],
             [-90.0994749502994, 44.66295379982497],
             [-90.09942667053713, 44.6629728771441],
             [-90.08718506859316, 44.66105748297947],
             [-90.0871743397571, 44.661439040649206],
             [-90.08719579742922, 44.660881965608176],
             [-90.08726017044557, 44.66104985180048],
             [-90.08719579742922, 44.66018752210304],
             [-90.08724944160952, 44.660508035523584],
             [-90.08800046013369, 44.66056145425476],
             [-90.08768932388796, 44.660614872936705],
             [-90.08855835960878, 44.660508035523584],
             [-90.09260313080324, 44.66066829156943],
             [-90.09265677498354, 44.660553823010474],
             [-90.08906261490358, 44.659737274067176],
             [-90.08697049187197, 44.65931754817297],
             [-90.08837596939577, 44.66228608970086],
             [-90.08901969955934, 44.66213346916414],
             [-90.08109108971132, 44.6607827599024],
             [-90.08468524979128, 44.66521632609356],
             [-90.08708850906862, 44.666040428393096],
             [-90.0881640748836, 44.66488820802821],
             [-90.08813725889894, 44.66479100032028],
             [-90.08814530552598, 44.66463647870109],
             [-90.08816139878007, 44.66460023282954],
             [-90.08841620863649, 44.664590694438544],
             [-90.08869515837404, 44.664539187099926],
             [-90.08913235844346, 44.66453155637921],
             [-90.08933888853761, 44.66452201797689],
             [-90.07742475309502, 44.664380404762774],
             [-90.07747035064827, 44.66434225104461],
             [-90.07741134204994, 44.66434225104461],
             [-90.07788341083656, 44.66440138929706],
             [-90.07798801698814, 44.66433080492427],
             [-90.07807384767662, 44.66430028192561],
             [-90.07800679245125, 44.664277389666104]]),
        {
          "class_2017": 0,
          "system:index": "0"
        }),
    impervious = /* color: #ff0000 */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-89.61528282574211, 45.01797068807322],
             [-89.61497168949639, 45.01797448009954],
             [-89.61469273975884, 45.017989648202324],
             [-89.61372714451348, 45.01784555106377],
             [-89.61564224175011, 45.02024585873801],
             [-89.6156046908239, 45.01997284303166],
             [-90.34318186926687, 45.00437329339733],
             [-90.34328915762747, 45.00417606086292],
             [-90.32577082599084, 45.00618658156552],
             [-90.32576680267732, 45.00623873263483],
             [-90.32584995115678, 45.00622925062574],
             [-90.32577753151338, 45.00608512389465],
             [-90.1737388654918, 44.66770957166065],
             [-90.17377105199998, 44.66761037763823],
             [-90.17096009695237, 44.66710677459811],
             [-90.16474269240912, 44.66807557652535],
             [-90.16476146787222, 44.66802597984854],
             [-90.16472391694602, 44.66798592096319],
             [-90.16413919538077, 44.667957307456724],
             [-90.16416869967993, 44.66798782852979],
             [-90.16414992421683, 44.66802979497902],
             [-90.16618572085913, 44.6677570125159],
             [-90.16619644969519, 44.66771313829358],
             [-90.1658906778675, 44.66820529071025],
             [-90.16589604228552, 44.66814424877704],
             [-90.16569755881842, 44.6683731556951],
             [-90.16570560544547, 44.66844373514582],
             [-90.16573242753562, 44.66842847473134],
             [-90.16578607171591, 44.668394138784016],
             [-90.1627042135578, 44.667934416641366],
             [-90.16269348472174, 44.66792106366157],
             [-90.16265325158652, 44.667970660428175],
             [-90.16274444669303, 44.667879097133614],
             [-90.1627578577381, 44.66785620628738],
             [-90.16287855714377, 44.66773984434588],
             [-90.16286246388968, 44.66777608825437],
             [-90.162918790279, 44.66770169283883],
             [-90.16289465039786, 44.66763302006281],
             [-90.16292415469702, 44.667680709499244],
             [-90.16294293016013, 44.66766354130663]]),
        {
          "class_2017": 1,
          "system:index": "0"
        }),
    soil = /* color: #c2ab6a */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-90.19509842881594, 44.767029174361994],
             [-90.20848801621828, 44.7726961059434],
             [-90.18489479543004, 44.76989704195741],
             [-90.15448927403722, 44.775061027926235],
             [-90.15313744069371, 44.77471068359724],
             [-90.13031446612335, 44.667559147499354],
             [-90.13035738146759, 44.667501920050924],
             [-90.13035201704956, 44.66713947823217],
             [-90.13030910170532, 44.66688767521344],
             [-90.13016962683655, 44.66692201205312],
             [-90.12506270087219, 44.66580223907477],
             [-90.12613558447815, 44.666809463447095],
             [-90.12853884375549, 44.66674842004394]]),
        {
          "class_2017": 2,
          "system:index": "0"
        }),
    tree = /* color: #34c058 */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-89.63244815469358, 45.01545015375048],
             [-89.63114996553037, 45.01322030063952],
             [-89.63323135972593, 45.01733863490571],
             [-89.64011927247617, 45.014896490842766],
             [-89.64170714021299, 45.0129851750132],
             [-89.62402870059583, 45.01463672249665],
             [-89.62392409444425, 45.01461965738154],
             [-89.62444980741117, 45.01441297947292],
             [-89.62455977798078, 45.01438832976431],
             [-89.62488432527158, 45.0146424108672],
             [-89.6246536552963, 45.014640514743746],
             [-89.62434520125959, 45.01470308678471],
             [-89.62344129682157, 45.014862360762336],
             [-89.62296922803495, 45.01482254230946],
             [-89.62323476672742, 45.01487563357384],
             [-89.62269296050641, 45.014725840237205],
             [-89.62226112485502, 45.014701190663274],
             [-89.62206264138791, 45.01472015187493],
             [-89.62527860999677, 45.01419871626642],
             [-89.62557365298841, 45.014037544299576],
             [-89.62535907626722, 45.01412666297258],
             [-89.62593038678739, 45.01424991197271],
             [-89.6261664211807, 45.014314380574795],
             [-89.62645341754529, 45.01414752051435],
             [-89.62655534148786, 45.01428404241816],
             [-89.62699790597532, 45.01411718226929],
             [-89.6270300924835, 45.01369054899616],
             [-89.62659289241407, 45.01358626037932],
             [-89.62603499293897, 45.01347438692465],
             [-89.62539394498441, 45.01344973681203],
             [-89.61065333298241, 45.01463360756462],
             [-89.60967700890099, 45.01496732436675],
             [-89.60894744804894, 45.01455017806022],
             [-89.61461227348839, 45.01392824519732],
             [-89.61386125496422, 45.01351867596489],
             [-89.61343210152184, 45.01291948606991],
             [-89.60797112396752, 45.01347316809159],
             [-89.6068875115255, 45.01331389025025],
             [-89.60715573242699, 45.01362486086197],
             [-90.32507479275148, 45.0062112348042],
             [-90.32503992403429, 45.00621313120674],
             [-90.32500773752611, 45.00625295564548],
             [-90.32508552158754, 45.0063136404513],
             [-90.32515794123094, 45.00627950525594],
             [-90.32512039030473, 45.006268126852966],
             [-90.3257641204683, 45.00613727505632],
             [-90.32574668610971, 45.0061116735829],
             [-90.32571986401956, 45.00618563336381],
             [-90.32568097198885, 45.006228302424766],
             [-90.32570377076547, 45.00627097145392],
             [-90.32563135112207, 45.00631079585246],
             [-90.32553076828401, 45.00631269225169],
             [-90.32527864063661, 45.006148653485305],
             [-90.32526522959154, 45.00618184055688],
             [-90.3252410897104, 45.006202700992006],
             [-90.32525450075548, 45.006230198826735],
             [-90.32530412162225, 45.00621028660291],
             [-90.28889034230285, 45.00763137764427],
             [-90.28882596928649, 45.00766171932507],
             [-90.28891179997497, 45.0077148172278],
             [-90.28896007973724, 45.00768068286742],
             [-90.16455493777808, 44.667953492321466],
             [-90.1645227512699, 44.66798019826303],
             [-90.1645039758068, 44.66804505549849],
             [-90.16454689115103, 44.66807557652535],
             [-90.16460053533133, 44.668094652158985],
             [-90.16465149730261, 44.668073668961654],
             [-90.16528181642111, 44.668231996535816],
             [-90.16526572316702, 44.668264425021746],
             [-90.16530863851126, 44.66833691215998],
             [-90.16538105815467, 44.66830257615842],
             [-90.16538910478171, 44.66820719826963],
             [-90.16548298209723, 44.668136618530866],
             [-90.16559027045783, 44.66785239114546],
             [-90.16552589744147, 44.667835223003706],
             [-90.16548834651526, 44.6677913488406],
             [-90.16550980418738, 44.6677417519206],
             [-90.16553394406851, 44.667716953444675],
             [-90.16562513917502, 44.6677455670698],
             [-90.16558222383078, 44.66781042456778],
             [-90.16588799565848, 44.667848576003294],
             [-90.1658370336872, 44.66784666843212],
             [-90.16577534287985, 44.667804701850294],
             [-90.16577266067084, 44.6677570125159],
             [-90.16578070729788, 44.66770169283883],
             [-90.16586385577735, 44.66761394427724],
             [-90.16595505088385, 44.66755671688293],
             [-90.16601405948218, 44.667577700267415],
             [-90.1660542926174, 44.667673079192056],
             [-90.16609720796164, 44.667699785262805],
             [-90.1663949331623, 44.66772649132128],
             [-90.16647003501471, 44.66771313829358],
             [-90.16666315406378, 44.66777990340131],
             [-90.16406141131934, 44.66791343338603],
             [-90.16396216958579, 44.6679077106787],
             [-90.16392461865958, 44.667915340955],
             [-90.16391657203253, 44.66800690419228],
             [-90.16399167388495, 44.66798782852979],
             [-90.16402386039313, 44.66802407228319],
             [-90.16408018678244, 44.6679935512292],
             [-90.16651831477698, 44.667890542553344],
             [-90.16649685710486, 44.66793632420966],
             [-90.16655586570319, 44.66798019826303],
             [-90.16659609883841, 44.667984013396534],
             [-90.16666851848181, 44.66806222357807],
             [-90.1666658362728, 44.66809846728496],
             [-90.16670606940802, 44.66804887062772],
             [-90.16676239579733, 44.668066038706186],
             [-90.16674898475226, 44.66802407228319],
             [-90.16694478601035, 44.66790961824787],
             [-90.16700379460868, 44.6679077106787],
             [-90.16706012099799, 44.667961122591734],
             [-90.16703329890784, 44.668018349586795],
             [-90.16698501914557, 44.668073668961654],
             [-90.16690187066611, 44.66808511434295],
             [-90.16732297748145, 44.667783718547994],
             [-90.16733102410849, 44.66773412162142],
             [-90.16735784619864, 44.667680709499244],
             [-90.16743026584204, 44.66767689434576],
             [-90.16750268548545, 44.667673079192056],
             [-90.16757242291983, 44.667699785262805],
             [-90.16761802047309, 44.6677417519206],
             [-90.1675670585018, 44.66779325641362],
             [-90.16706012099799, 44.667695970110586],
             [-90.1670252522808, 44.66765781857465],
             [-90.167062803207, 44.66760440638213],
             [-90.16717277377661, 44.66766354130663],
             [-90.16714058726843, 44.667692154958125],
             [-90.16713790505942, 44.66758723816696],
             [-90.1671700915676, 44.66761012911942],
             [-90.13004624522186, 44.66780713245628],
             [-90.13004088080383, 44.66775753554976],
             [-90.13006233847595, 44.66766597191858],
             [-90.13005160963989, 44.66763163551958],
             [-90.13008379614807, 44.66754770201418],
             [-90.13006233847595, 44.66748284422223],
             [-90.13004624522186, 44.66735694359536],
             [-90.13369404948212, 44.667727014355435],
             [-90.13361358321167, 44.66769649314505],
             [-90.13346874392487, 44.66770412344916],
             [-90.13330244696594, 44.66771175375225],
             [-90.1330610481546, 44.667727014355435],
             [-90.13292157328583, 44.667715568903446],
             [-90.13284110701538, 44.667768980993515],
             [-90.13281964934326, 44.667910141280394],
             [-90.13283574259735, 44.668078007119995],
             [-90.13285183585144, 44.66834888051786],
             [-90.13005697405792, 44.668066561737284],
             [-90.13007843173004, 44.66823824224069],
             [-90.13007843173004, 44.66838703159897],
             [-90.13012134707428, 44.66836032584483],
             [-90.13011598265625, 44.66849385449244],
             [-90.13396495259262, 44.66780522488376],
             [-90.1339783636377, 44.66787008231499],
             [-90.13391399062134, 44.667906326142024],
             [-90.1339059439943, 44.667900603433985],
             [-90.13388180411316, 44.6679616456238],
             [-90.13386839306808, 44.66805511635231],
             [-90.10828427534715, 44.66230449108346],
             [-90.10827891092912, 44.66235981591124],
             [-90.10823599558488, 44.66242086393579],
             [-90.1082413600029, 44.66250862035848],
             [-90.10821990233079, 44.66260019213616],
             [-90.10824672442094, 44.66269367151003],
             [-90.10831914406434, 44.66265170119755],
             [-90.10841033917085, 44.66247237315651],
             [-90.1084022925438, 44.66232929187487],
             [-90.10869465332642, 44.66243040268383],
             [-90.1088341281952, 44.66231402985064],
             [-90.10873488646165, 44.66259828439226],
             [-90.10909430246964, 44.66259256116022],
             [-90.10910234909669, 44.6624628344154],
             [-90.10826549988404, 44.66296838553229],
             [-90.10826818209306, 44.66292450768554],
             [-90.10826281767503, 44.662886353009185],
             [-90.10824940662995, 44.66282339773833],
             [-90.10825477104798, 44.66278524299541],
             [-90.10835937719956, 44.66310574205528],
             [-90.10831914406434, 44.663092387963154],
             [-90.10831646185532, 44.663040879293305],
             [-90.10882071715012, 44.663040879293305],
             [-90.10878853064195, 44.66295884687277],
             [-90.10894583033098, 44.66294807662801],
             [-90.10882513092531, 44.66286795181125],
             [-90.10893778370394, 44.66278782688373],
             [-90.10616706179155, 44.66280499652039],
             [-90.10615633295549, 44.66270388636474],
             [-90.10618047283663, 44.66256843663458],
             [-90.10610000656618, 44.66244061758492],
             [-90.10616974400057, 44.662904198765865],
             [-90.10619656609072, 44.6630682636455],
             [-90.1061938838817, 44.66320371220788],
             [-90.105888112054, 44.66316937316566],
             [-90.10485546158327, 44.66295379982497],
             [-90.0988097624637, 44.66256843663458],
             [-90.09808020161165, 44.66255699016402],
             [-90.09769932793154, 44.66194269292825],
             [-90.09833232925905, 44.66182059580783],
             [-90.09743647144808, 44.66188164440018],
             [-90.09656743572725, 44.66175573160802],
             [-90.09597198532595, 44.66191979973775],
             [-90.09729163216127, 44.66229372071713],
             [-90.09713606403841, 44.6627897346214],
             [-90.09864882992281, 44.66274776437848],
             [-90.09525315330995, 44.663129310924056],
             [-90.09795145557894, 44.66311786456423],
             [-90.09752766655458, 44.66368254895483],
             [-90.09679810570253, 44.66379701133654],
             [-90.09634749458803, 44.663041555440934],
             [-90.09548918770327, 44.662667639284855],
             [-90.09556428955568, 44.66201900349794],
             [-90.09383694695009, 44.66314075728162],
             [-90.09387986229433, 44.66314075728162],
             [-90.09394423531069, 44.66314075728162],
             [-90.09745256470217, 44.66357571719471],
             [-90.09750620888246, 44.66360624057482],
             [-90.09748475121035, 44.663552824649045],
             [-90.09546773003115, 44.66374359558653],
             [-90.09549991653932, 44.663735964761095],
             [-90.09552137421144, 44.66375122641099],
             [-90.09335414932741, 44.66259896054506],
             [-90.09323613213076, 44.66263711541054],
             [-90.09328977631105, 44.662438709835776],
             [-90.09218470619692, 44.66245397182718],
             [-90.09909407661928, 44.663362053083794],
             [-90.09896533058657, 44.66399541226275]]),
        {
          "class_2017": 3,
          "system:index": "0"
        }),
    water = /* color: #2523be */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-90.36288001227224, 45.00693725455157],
             [-90.36277272391165, 45.00827228948008],
             [-90.36169984030569, 45.007210332409215],
             [-90.36054112601126, 45.00698276761825],
             [-90.35923220801199, 45.008894283764306],
             [-90.35908200430715, 45.007255845258925],
             [-90.32095223749559, 45.00857031101936],
             [-90.32103806818407, 45.00850393962458],
             [-90.32090395773332, 45.00838257458951],
             [-90.29483442596701, 45.00432615604225],
             [-90.29596095375327, 45.004398221665895],
             [-90.29558008007315, 45.004466494278354],
             [-90.2954620628765, 45.004208575093266],
             [-90.13123233823143, 44.75900099927324],
             [-90.13130744008384, 44.75868674454283],
             [-90.12664307860695, 44.760764603199966],
             [-90.12657870559059, 44.76017801089249],
             [-90.12378384379707, 44.760082784306675],
             [-90.21264109705243, 44.740514081919805],
             [-90.22369179819378, 44.738753670444034],
             [-90.22452864740643, 44.73893657283269],
             [-90.2257839212254, 44.74103609839574],
             [-90.22632089101975, 44.74270502182782],
             [-90.22758689367478, 44.74168387598077],
             [-90.21677222692674, 44.743055560273525],
             [-90.13393813050247, 44.66785863689121],
             [-90.13394081271149, 44.667824300606355],
             [-90.1339434949205, 44.66778805672804],
             [-90.1338898507402, 44.66776325827193],
             [-90.13386839306808, 44.66789106558604],
             [-90.13387643969513, 44.668005519657974]]),
        {
          "class_2017": 4,
          "system:index": "0"
        });
/***** End of imports. If edited, may not auto-convert in the playground. *****/
var wb = ee.Image('users/erker/UTC/marathon_water/water_bodies');
var wl = ee.Image('users/erker/UTC/marathon_water/water_lines');

var classProperty = 'class_2017';

var pts = ee.FeatureCollection('users/erkere/marathonShapefiles/marathon_accuracy_training').remap(['G','I','S','T','W'], [0,1,2,3,4], classProperty);

var buf3000 = function(feature) {return feature.buffer(3000)};
var urbanregion = pts.map(buf3000);
var naip = ee.ImageCollection('USDA/NAIP/DOQQ').filterBounds(urbanregion);  
var naip17c = naip.filterDate('2017-01-01', '2017-12-31');
var naip18c = naip.filterDate('2018-01-01', '2018-12-31');


var pts = pts.merge(grass).merge(tree).merge(soil).merge(impervious).merge(water);

var naip17 = naip17c.median().byte();
var naip18 = naip18c.median().byte();



var ndvi = naip17.normalizedDifference(['N', 'R']);
var gauss53 = ee.Kernel.gaussian({radius: 5, sigma: 3, units: 'pixels', normalize:true});
var naip17Gauss53 = naip17.convolve(gauss53);
var naip18Gauss53 = naip18.convolve(gauss53);
var gauss104 = ee.Kernel.gaussian({radius: 10, sigma: 4, units: 'pixels', normalize:true});
var naip17Gauss104 = naip17.convolve(gauss104);
var naip18Gauss104 = naip18.convolve(gauss104);
var win10 = ee.Kernel.square({radius: 10});
var entro10 = naip17.select('N').entropy(win10);
var win5 = ee.Kernel.square({radius: 5});
var entro5 = naip17.select('N').entropy(win5);
var nir17glcm3 = naip17.select(['N']).glcmTexture({size: 3, average: false});
var contrast3 = nir17glcm3.select('N_contrast_-1_-1', 'N_contrast_0_-1', 'N_contrast_1_-1', 'N_contrast_-1_0');
var nir17glcm7 = naip17.select(['N']).glcmTexture({size: 7, average: false});
var contrast7 = nir17glcm7.select('N_contrast_-1_-1', 'N_contrast_0_-1', 'N_contrast_1_-1', 'N_contrast_-1_0');

var image = ee.Image.cat([naip17, naip18, ndvi, naip17Gauss53, naip17Gauss104, naip18Gauss104, entro10, entro5, contrast3, contrast7, wb, wl]);

var image = ee.Image.cat([naip17, naip18, naip17Gauss53, entro5, contrast3, wb, wl]);


var training = image.sampleRegions({
  collection: pts,
  properties: [classProperty],
  scale: 1
});
print(training.size());

var trainedClassifier = ee.Classifier.smileRandomForest(10).train({
  features: training,
  classProperty: classProperty,
  inputProperties: image.bandNames()
});

// print(trainedClassifier);

var testpts = ee.FeatureCollection('users/erkere/marathonShapefiles/marathon_accuracy_testing').remap(['G','I','S','T','W'], [0,1,2,3,4], classProperty);
var testing = image.sampleRegions({collection: testpts, properties: [classProperty], scale: 1});
var testingClassified = testing.classify(trainedClassifier);
var testAccuracy = testingClassified.errorMatrix('class_2017', 'classification');
print('Testing error matrix: ', testAccuracy);
print('Testing overall accuracy: ', testAccuracy.accuracy());

// var validation = image.sampleRegions({collection: testpts, properties: [classProperty], scale: 1});
// var validationClassified = validation.classify(trainedClassifier);
// var validationAccuracy = validationClassified.errorMatrix('class_2017', 'classification');
// print('Validation error matrix: ', validationAccuracy);
// print('Validation overall accuracy: ', validationAccuracy.accuracy());


var classified = image.classify(trainedClassifier);




// Map.centerObject(pts, 24);
Map.addLayer(naip17);
//Map.addLayer(naip18);
Map.addLayer(classified, {min: 0, max: 4, palette: ['yellow', 'red', 'brown','green','blue']});





// Export.image.toDrive({
//   image: classified,
//   description: 'marathon2017-fullcounty',
//   scale: 1,
//   maxPixels: 12000000000,
//   region: marathonExport,
//   crs: 'EPSG:3070',
// });


// Export.image.toAsset({
//   image: classified,
//   description: 'marathonClassified2017',
//   assetId: 'marathonClassified2017',
//   scale: 1,
//   maxPixels: 12000000000,
//   region: marathonExport,
//   pyramidingPolicy: {
//     'classification': 'mode'
//   }
// });