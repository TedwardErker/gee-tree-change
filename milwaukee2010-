/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var grass = /* color: #fcff29 */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-87.91289664903034, 43.035042364708566],
             [-87.91280277171482, 43.03498550947638],
             [-87.91263379254688, 43.03491493049418],
             [-87.91255869069447, 43.03489728573594],
             [-87.9125828305756, 43.034812982932145],
             [-87.9127625385796, 43.03490512785133],
             [-87.91299320855488, 43.03509137779748],
             [-87.91297711530079, 43.03500315420923],
             [-87.91293151774754, 43.03495218052267],
             [-87.9127813140427, 43.034895325206946],
             [-87.91268207230915, 43.03488356203159],
             [-87.91270621219029, 43.03495610157699],
             [-87.91139729419102, 43.03495806210405],
             [-87.91149385371556, 43.034912969965724],
             [-87.91158773103108, 43.03486395673432],
             [-87.9114294806992, 43.03488356203159],
             [-87.91133023896565, 43.034885522560955],
             [-87.91133292117466, 43.03497962789761],
             [-87.91250504651417, 43.035228614238164],
             [-87.91238971152653, 43.03517764073888],
             [-87.91248090663304, 43.035377613454884],
             [-87.91255600848545, 43.03537957396846],
             [-87.91255600848545, 43.03534428471413],
             [-87.91254796185841, 43.035295271827195],
             [-87.91269280114521, 43.03534428471413],
             [-87.91279472508778, 43.035430547300045],
             [-87.91232802071919, 43.035299192859604],
             [-87.91243530907978, 43.03527566666148],
             [-87.91298516192784, 43.03477965388473],
             [-87.91293419995655, 43.03477377228624],
             [-87.91285909810414, 43.034768870953755],
             [-87.91299186745037, 43.03482964744903],
             [-87.99106198867959, 43.127949665633835],
             [-87.99107003530663, 43.12773433435885],
             [-87.99109819850129, 43.12760513522997],
             [-87.99107271751565, 43.12758164444996],
             [-87.9910760637641, 43.127363519691606],
             [-87.99108545149565, 43.12733121973917],
             [-87.99106935824156, 43.12749614507511],
             [-87.99112434352637, 43.12740707566108],
             [-87.99112568463087, 43.127140845430574],
             [-87.99114580119848, 43.12719761520927],
             [-87.99108276928663, 43.127264172813774],
             [-87.99218195957224, 43.12704340173278],
             [-87.99217123073618, 43.12703263502752],
             [-87.84854625222907, 42.925886668293614],
             [-87.84852479455695, 42.92605950075868],
             [-87.91186716332194, 42.97044370094705],
             [-87.916920445106, 42.97045155129401],
             [-87.92120125069377, 42.970420149900185],
             [-87.90567662491557, 42.97078126496133],
             [-87.90070917381998, 42.97086761824881],
             [-87.89989646448846, 42.97074986373584],
             [-87.9656280922717, 42.970163105008005],
             [-87.96932954071224, 42.9705948745724],
             [-87.97453302620113, 42.9706969287538],
             [-87.96253818748654, 42.969535071140044],
             [-88.00665159686993, 42.969770222263655],
             [-88.0049886272807, 42.96962891429986],
             [-88.0114903019328, 42.96967601699054],
             [-88.0358171079628, 42.96991200982902],
             [-88.0370822178623, 42.97517801597426],
             [-88.03748991363257, 42.975174091102566],
             [-88.03750600688666, 42.97494252322854],
             [-88.03707148902625, 42.97494252322854],
             [-88.03723259167835, 42.98230464336846],
             [-88.03690536217853, 42.98230071895162],
             [-88.03725823736328, 42.98628843032524],
             [-88.03721532201904, 42.984812927555154],
             [-88.03730115270751, 42.988752754914245],
             [-88.03713710852875, 42.996025854597896],
             [-87.9963853674592, 42.96985811592121],
             [-87.98087147051706, 42.97040764302018],
             [-87.97897246653451, 42.97061960216053],
             [-87.97654774958505, 42.97068240472851],
             [-87.90050687618789, 42.970869771876046],
             [-87.90046932526168, 42.97085014614023],
             [-87.90047468967971, 42.9708030443487],
             [-87.90050687618789, 42.970785381167595],
             [-87.90053638048705, 42.970785381167595],
             [-87.90054979153213, 42.970752017367204],
             [-87.90055515595016, 42.97072454128271],
             [-87.90056052036819, 42.97071080323586],
             [-87.90056856699523, 42.97068725229126],
             [-87.90060075350341, 42.97068332713295],
             [-87.90057929583129, 42.970677439395004],
             [-87.90653916426238, 42.97082267009955],
             [-87.90651770659026, 42.9707991191978],
             [-87.90649624891815, 42.97077556828702],
             [-87.90647479124603, 42.9707441670586],
             [-87.90646406240997, 42.97072061612677],
             [-87.90645333357391, 42.97068921487031],
             [-87.90643187590179, 42.970665663917444],
             [-87.90642114706573, 42.97064996327719],
             [-87.90347886043708, 42.97096215807399],
             [-87.90345740276496, 42.97093468208336],
             [-87.90343326288382, 42.97090720608045],
             [-87.9034118052117, 42.97087973006528],
             [-87.90339571195761, 42.97085421661164],
             [-87.9033581610314, 42.970814965123814],
             [-87.90331256347815, 42.970789451643284],
             [-87.90326428371588, 42.97073449949546],
             [-87.90321868616263, 42.97067954729854]]),
        {
          "class_2010": 0,
          "system:index": "0"
        }),
    impervious = /* color: #be1414 */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-87.90052084739216, 43.07109079317892],
             [-87.90033309276112, 43.07111234627033],
             [-87.90017752463825, 43.071098630667585],
             [-87.90031968171604, 43.0710888338066],
             [-87.90006487185963, 43.07111234627033],
             [-87.89992807919987, 43.07109275255119],
             [-87.89976714665897, 43.07109667129551],
             [-87.89949624354847, 43.07110059003958],
             [-87.8992494803191, 43.071102549411535],
             [-87.90069787318714, 43.07109275255119],
             [-87.90090172107227, 43.07110450878342],
             [-87.90128795917042, 43.07110646815524],
             [-87.90150790030964, 43.07111430564189],
             [-87.9015374046088, 43.07111234627033],
             [-87.90174661691196, 43.07111038689871],
             [-87.90190486724384, 43.071102549411535],
             [-87.9018083077193, 43.07111234627033],
             [-87.90234474952229, 43.07112214312756],
             [-87.9025459151984, 43.07112214312756],
             [-87.90276317412861, 43.07112214312756],
             [-87.90291606004246, 43.071128021241144],
             [-87.9029589753867, 43.07111038689871],
             [-87.89993880803593, 43.07107315882574],
             [-87.89997635896214, 43.07105748384092],
             [-87.90007560069569, 43.071059443214224],
             [-87.89982079083927, 43.07106532133384],
             [-87.91489221253742, 43.03454831058624],
             [-87.91480638184895, 43.03453458680385],
             [-87.9145998517548, 43.03451498139509],
             [-87.91434235968937, 43.03454438950586],
             [-87.91421897807469, 43.03453262626326],
             [-87.91380591788639, 43.03380722194495],
             [-87.91462130942692, 43.03354842697782],
             [-87.91439600386967, 43.033517057816745],
             [-87.91530795493473, 43.033517057816745],
             [-87.91630573668827, 43.03355626926559],
             [-87.91632719436039, 43.033964066848434],
             [-87.91688509383549, 43.03405817359812],
             [-87.91737862029423, 43.033964066848434],
             [-87.91756101050724, 43.03397190908308],
             [-87.91783996024479, 43.03382290645332],
             [-87.91792579093327, 43.03379153743255],
             [-87.91758246817936, 43.03431696641565],
             [-87.91759319701542, 43.03422286006282],
             [-87.91711039939274, 43.03420717565663],
             [-87.91971214213719, 43.0340013174541],
             [-87.91964508691181, 43.034050331374495],
             [-87.91954852738728, 43.0340111202413],
             [-87.91937954821934, 43.034017001912886],
             [-87.91926689544071, 43.034050331374495],
             [-87.91918642917027, 43.03396798796589],
             [-87.91909255185475, 43.03402484414077],
             [-87.91680730977406, 43.03340334447343],
             [-87.91643180051197, 43.03338373870328],
             [-87.91586853661885, 43.03337981754848],
             [-87.91505314507832, 43.03336021177082],
             [-87.91449524560322, 43.03332492135525],
             [-87.91404999890675, 43.033309236719575],
             [-87.91354037919392, 43.033317079037936],
             [-87.9134652773415, 43.03355234812185],
             [-87.91324533620228, 43.03359940183039],
             [-87.91321851411213, 43.033760168395744],
             [-87.91323460736622, 43.033991514665324],
             [-87.91383005776753, 43.03420325455447],
             [-87.91435577073445, 43.03419933345206],
             [-87.9146722713982, 43.0340071991266],
             [-87.91498877206196, 43.03412091135105],
             [-87.99293389820474, 43.12158362129082],
             [-87.99359908604043, 43.12161494539992],
             [-87.99330940746682, 43.122546830310164],
             [-87.99359908604043, 43.122531168496195],
             [-87.99295535587686, 43.122593815728095],
             [-87.9899727394523, 43.11992342055837],
             [-87.98983862900155, 43.11991950493738],
             [-87.98992445969003, 43.120127032505835],
             [-87.97674673830761, 43.12183920232092],
             [-87.97675210272564, 43.12180592057646],
             [-87.97671455179943, 43.12175893455345],
             [-87.97672528063549, 43.121721737259655],
             [-87.9767977002789, 43.121715864000656],
             [-87.97680574690594, 43.12180200507592],
             [-87.97675478493466, 43.12160231421614],
             [-87.9767816070248, 43.121559243553115],
             [-87.97666895424618, 43.121512257340655],
             [-87.97671991621746, 43.12142220033257],
             [-87.97677087818874, 43.12130473447066],
             [-87.97673064505352, 43.121218592695264],
             [-87.97673600947155, 43.12111287307786],
             [-87.97681379353298, 43.12107371761767],
             [-87.97687280213131, 43.12120488831072],
             [-87.97692644631161, 43.12120684608014],
             [-87.97689694201244, 43.12143786243045],
             [-87.97693449293865, 43.121541623727666],
             [-87.97696399723782, 43.12172565276533],
             [-87.97715175186886, 43.1216688779085],
             [-87.98563557898296, 43.12398094239324],
             [-87.98550146853222, 43.12396528094638],
             [-87.98561412131085, 43.12382432774427],
             [-87.98551756178631, 43.123820412372915],
             [-87.98557657038464, 43.1239887731152],
             [-87.98666018282665, 43.12340244503892],
             [-87.98661190306439, 43.123349587139884],
             [-87.98663872515453, 43.123746999113486],
             [-87.98663872515453, 43.12381551815837],
             [-87.98468339478268, 43.12381943353004],
             [-87.9847048524548, 43.123895783227596],
             [-87.98472094570889, 43.12378615286283],
             [-87.98474508559002, 43.12370784533911],
             [-87.98469412361874, 43.12367456461119],
             [-87.9846512082745, 43.123737210672246],
             [-87.98475581442608, 43.1238625026019],
             [-87.98477995430721, 43.123895783227596],
             [-87.98469680582775, 43.12395842906214],
             [-87.98462975060238, 43.123972132829884],
             [-87.98615321713615, 43.12370497052365],
             [-87.98615589934516, 43.12375293389606],
             [-87.98615992265869, 43.12381557987688],
             [-87.98614785271812, 43.12396338498361],
             [-87.9861451705091, 43.12394478700969],
             [-87.98734143572975, 43.123910527569244],
             [-87.98733607131172, 43.12395555425845],
             [-87.98734009462524, 43.124017221192055],
             [-87.98734948235679, 43.123796981858035],
             [-87.98734680014778, 43.12383613557536],
             [-87.98702225285697, 43.123885077686786],
             [-87.98695251542259, 43.12388018347741],
             [-87.98691362339187, 43.12388018347741],
             [-87.98700347739387, 43.12355814363964],
             [-87.98839017945457, 43.12389878147097],
             [-87.98839286166358, 43.12386452200475],
             [-87.98819571930099, 43.12387822579353],
             [-87.9881970604055, 43.12393304091798],
             [-87.98824399906326, 43.12393010439472],
             [-87.98824668127227, 43.12397708875026],
             [-87.98778668242622, 43.12399470787428],
             [-87.98780277568031, 43.12395946962116],
             [-87.98779472905326, 43.1238694162154],
             [-87.98780679899383, 43.12364721865798],
             [-87.98741385537315, 43.12378719342477],
             [-87.98736289340187, 43.12378719342477],
             [-87.98742994862724, 43.12387039505746],
             [-87.98751846152473, 43.12387920463547],
             [-87.98752784925628, 43.12391346409345],
             [-87.98747956949401, 43.12390856988637],
             [-87.98743531304527, 43.12390563336191],
             [-87.98741921979118, 43.123995686714366],
             [-87.98747286397148, 43.123997644394464],
             [-87.98753589588333, 43.12400449627434],
             [-87.99364512259508, 43.12287917108158],
             [-87.99361830050493, 43.12284784761976],
             [-87.85659287927375, 42.9259809406074],
             [-87.85649631974921, 42.92909970164953],
             [-87.85653387067542, 42.92882475425216],
             [-87.85710786340461, 42.92879725944492],
             [-87.85649095533118, 42.928683352255625],
             [-87.8579178905271, 42.92741464759811],
             [-87.85881374833808, 42.92743821510549]]),
        {
          "class_2010": 1,
          "system:index": "0"
        }),
    tree = /* color: #15c232 */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-87.97343480732383, 42.99151874420328],
             [-87.97344285395087, 42.99148833452492],
             [-87.97342005517424, 42.991456943873395],
             [-87.97341469075621, 42.9915589634322],
             [-87.97553066218785, 42.99146674569569],
             [-87.97550652230672, 42.99140788819027],
             [-87.97560576404027, 42.991451050366436],
             [-87.97560576404027, 42.99140985010802],
             [-87.97560308183125, 42.991311754143524],
             [-87.97559771741322, 42.991262706102574],
             [-87.97553334439687, 42.99124701072121],
             [-87.97689858878545, 42.991250934566914],
             [-87.97695223296574, 42.99119011493013],
             [-87.97695491517476, 42.99128821108876],
             [-87.9769629618018, 42.99124308687523],
             [-87.97703269923619, 42.99123720110582],
             [-87.97701392377309, 42.99120581032603],
             [-87.97518331612042, 42.99250360950677],
             [-87.97523964250973, 42.99246829560605],
             [-87.97531340325764, 42.99250360950677],
             [-87.97525707686833, 42.99253696150547],
             [-87.97479037249974, 42.992401591516],
             [-87.97483462894849, 42.99234567773769],
             [-87.97484401668004, 42.992400610572965],
             [-87.97482390011243, 42.992456524301296],
             [-87.9749083896964, 42.992456524301296],
             [-87.97495264614514, 42.99239374397123],
             [-87.97492314184598, 42.99235156340094],
             [-87.96675749017201, 42.991658499985604],
             [-87.96670250488721, 42.9916594809405],
             [-87.96673066808187, 42.991631033242456],
             [-87.96661265088521, 42.99160650935427],
             [-87.96652950240575, 42.99162809037637],
             [-87.96651743246518, 42.99166929048849],
             [-87.9665388901373, 42.991712452481075],
             [-87.96666093064748, 42.99171049057297],
             [-87.96763323141538, 42.99164770948083],
             [-87.96756081177197, 42.991667328579005],
             [-87.96756885839902, 42.99172814774357],
             [-87.96761579705678, 42.991788966847956],
             [-87.96773783756696, 42.991712452481075],
             [-87.96772040320836, 42.99175757634999],
             [-87.96771101547681, 42.99166634762427],
             [-87.96767212344609, 42.991735995373325],
             [-87.96814313407202, 42.99194815145182],
             [-87.96812301750441, 42.99190302772282],
             [-87.96806132669707, 42.99188537060245],
             [-87.96800902362128, 42.99192853244329],
             [-87.96809083099623, 42.99199817989523],
             [-87.96811765308638, 42.99198542755078],
             [-87.96805193896552, 42.991963846654144],
             [-87.96808010216017, 42.991937360997895],
             [-87.96918318169965, 42.99198817750406],
             [-87.9691389252509, 42.991978858481865],
             [-87.96911277371301, 42.99193373477541],
             [-87.96913356083287, 42.99189351579172],
             [-87.96918117004289, 42.99189449674286],
             [-87.96921603876008, 42.99189989197381],
             [-87.96923347311868, 42.99193226334963],
             [-87.96922408538713, 42.991975425157534],
             [-87.96920665102853, 42.99197689658226],
             [-88.03287133983471, 42.972347853779006],
             [-88.0329236429105, 42.972324303461235],
             [-88.03291425517895, 42.97238317923871],
             [-88.03295314720967, 42.97235864767163],
             [-88.03293303064206, 42.972105481327645],
             [-88.03298667482235, 42.97207506204563],
             [-88.03302824906208, 42.97210450006072],
             [-88.03299069813588, 42.97212510666288],
             [-88.03231880477765, 42.97258041268253],
             [-88.03235367349484, 42.97255686245384],
             [-88.03239122442105, 42.972577468904454],
             [-88.03235501459935, 42.972601019125264],
             [-88.03193728805819, 42.972666229862995],
             [-88.03196679235735, 42.97264513281299],
             [-88.031992273343, 42.97266819237891],
             [-88.03196343959608, 42.97269223319375],
             [-88.03325541867633, 42.97272070728213],
             [-88.0332138444366, 42.97274376681973],
             [-88.03329296960254, 42.97274376681973],
             [-88.03324938370605, 42.97276339195129],
             [-88.03325944198986, 42.97274033242106],
             [-88.03336136593242, 42.972680475727756],
             [-88.03339221133609, 42.972646131697104],
             [-88.03336002482791, 42.97260344694657],
             [-88.03330302788635, 42.972641716034616],
             [-88.03332582666297, 42.97262356275222],
             [-88.0337499917744, 42.97322405816879],
             [-88.03370640587791, 42.97318922381687],
             [-88.03370305311664, 42.97315095506949],
             [-88.03374798011764, 42.97312642380865],
             [-88.03381302368625, 42.97315095506949],
             [-88.03381905865653, 42.973185789443086],
             [-88.03379156601413, 42.97320296131014],
             [-88.03376809668525, 42.973174014445775],
             [-88.03377010834201, 42.973153898820144],
             [-88.03574852266858, 42.972766253798824],
             [-88.03570560732435, 42.97273877861414],
             [-88.03566537418912, 42.972754478721185],
             [-88.03570024290632, 42.97278195389884],
             [-88.03563586988996, 42.97274172238452],
             [-88.03558490791868, 42.97276527254244],
             [-88.03561709442685, 42.972785878923226],
             [-88.02980776696555, 42.97227913665968],
             [-88.02980374365202, 42.97224381114024],
             [-88.02983861236922, 42.97220161674314],
             [-88.0298895743405, 42.97219572915056],
             [-88.02991907863967, 42.97221829825241],
             [-88.02993651299826, 42.972241848610764],
             [-88.02990164428107, 42.97227913665968],
             [-88.02986007004134, 42.97227324907454],
             [-88.02992176084868, 42.972459688997915],
             [-88.02988689213149, 42.97243613872299],
             [-88.0298533645188, 42.97243810124626],
             [-88.02984263568274, 42.97247048287092],
             [-88.02988689213149, 42.97249305187196],
             [-88.02886639605643, 42.97251044296501],
             [-88.0288959003556, 42.97247021127308],
             [-88.0289522267449, 42.972476098839394],
             [-88.02899514208914, 42.97251338674631],
             [-88.02893076907279, 42.972560487227966],
             [-88.02893747459532, 42.97252418060986],
             [-88.02889187704207, 42.97254380581152],
             [-87.98575790572555, 42.92310334601993],
             [-87.98580082106979, 42.92297371549631],
             [-87.98580082106979, 42.923407780268086],
             [-87.98583032536895, 42.92347455919233],
             [-87.98585178304107, 42.92354526620966],
             [-87.98587324071319, 42.92362382946706],
             [-87.98583568978698, 42.92362972170735],
             [-87.98587860513122, 42.923712213011925],
             [-87.98573376584442, 42.9233567139831],
             [-87.98377843547256, 42.923152448419785],
             [-87.98375429559142, 42.923217263527654],
             [-87.98376234221847, 42.92325458128611],
             [-87.98393936801345, 42.9232526171941],
             [-87.98394473243148, 42.923170125274126]]),
        {
          "class_2010": 3,
          "system:index": "0"
        }),
    water = /* color: #3049c2 */ee.Feature(
        ee.Geometry.MultiPoint(
            [[-87.86357174866852, 43.074794823958285],
             [-87.86331425660309, 43.07336847053978],
             [-87.86333571427521, 43.07437162366046],
             [-87.86180685513672, 43.07211842472643],
             [-87.86512742989716, 43.069289073271136],
             [-87.86328207009491, 43.072831620132376],
             [-87.86278854363617, 43.07195383999259],
             [-87.8637112235373, 43.0715619697997],
             [-87.8926972321397, 43.07169824375302],
             [-87.89262213028728, 43.071894178727],
             [-87.89255239285289, 43.072380094759446],
             [-87.89247192658245, 43.07269358692936],
             [-87.89243437565624, 43.07305410094234],
             [-87.89283134259044, 43.0712828595366],
             [-87.89312370337306, 43.07148663327759],
             [-87.89307810581981, 43.07162378829867],
             [-87.89298422850429, 43.07188242264623],
             [-87.89292253769695, 43.07209599109535],
             [-87.89289839781581, 43.07230564013344],
             [-87.89583779969563, 43.03442675697821],
             [-87.89568223157276, 43.03446204676019],
             [-87.89555348554005, 43.03449733652186],
             [-87.89530672231068, 43.03464633751412],
             [-87.89522625604023, 43.034481652185846],
             [-87.89517529406895, 43.03459536353116],
             [-87.89515115418781, 43.03474044321756],
             [-87.8950572768723, 43.03467574556195],
             [-87.89533354440083, 43.03484631196142],
             [-87.89525307813038, 43.03484827249201],
             [-87.89561249413838, 43.03491689102254],
             [-87.8954917947327, 43.034989430528555],
             [-87.89539255299916, 43.03502275946204],
             [-87.89513506093373, 43.03492277260731],
             [-87.89505459466328, 43.034912969965724],
             [-87.89501167931904, 43.03503648313525],
             [-87.89515920081486, 43.035152153973364],
             [-87.89536036649098, 43.035203127493816],
             [-87.89592631259312, 43.03505412785347],
             [-87.89635814824452, 43.03491100943722],
             [-87.8964278856789, 43.03452086301838],
             [-87.89636619487156, 43.03429343984097],
             [-87.89615161815037, 43.03420717565663],
             [-87.89591290154804, 43.0341797279362],
             [-87.8956875959908, 43.03422678116371],
             [-87.89563931622853, 43.03416992517592],
             [-87.89550520577778, 43.03420913620763],
             [-87.89550520577778, 43.03429343984097],
             [-87.89536036649098, 43.03427775545284],
             [-87.89539523520817, 43.03432872969958],
             [-87.89531745114674, 43.03439146717596],
             [-87.89528258242954, 43.03433657188764],
             [-87.89520479836811, 43.0344306780661],
             [-87.89721109071125, 43.034395388266105],
             [-87.89732910790791, 43.03431892696312],
             [-87.89711453118672, 43.03404444970611],
             [-87.89699114957203, 43.03433069024669],
             [-87.8971467176949, 43.03424638666455],
             [-87.8968945900475, 43.03415816186153],
             [-87.89597459235539, 43.03486591726433],
             [-87.89592631259312, 43.03471299573562],
             [-87.8965003053223, 43.035454073438764],
             [-87.89603896537174, 43.035681492315],
             [-87.89617844024052, 43.035332521624845],
             [-87.89551861682286, 43.03563444020285],
             [-87.89585657515873, 43.03574422840838],
             [-87.89573855796208, 43.035410942177506],
             [-87.89522893824925, 43.0356854133227],
             [-87.8948963443314, 43.035520730782906],
             [-87.89467103877415, 43.03529331131092],
             [-87.9165820042168, 43.033332763671574],
             [-87.91622795262684, 43.03332100019671],
             [-87.91592754521717, 43.033309236719575],
             [-87.91550375619282, 43.03330139440025],
             [-87.9150316874062, 43.0332739462747],
             [-87.91465617814411, 43.033266103950865],
             [-87.91474737325062, 43.03308965139948],
             [-87.91558422246327, 43.03310925726356],
             [-87.91631378331532, 43.03316807481827],
             [-87.91718281903614, 43.033262182788555],
             [-87.91785337128987, 43.03322297115182],
             [-87.91779972710957, 43.03305436082832],
             [-87.91646935143818, 43.03299946434396],
             [-87.91518725552906, 43.03296025253934],
             [-87.91373886266102, 43.033140626633106],
             [-87.91352965035786, 43.03310141491869],
             [-87.9138783375298, 43.03290143478545],
             [-87.91474200883259, 43.032928883077616],
             [-87.99056596942496, 43.10929360817462],
             [-87.99056596942496, 43.10955991606957],
             [-87.99054987617087, 43.109896715571516],
             [-87.99087710567069, 43.1089646379988],
             [-87.99065716453147, 43.10898813592714],
             [-87.99059279151511, 43.1088980604862],
             [-87.99059279151511, 43.109164370102135],
             [-87.99058206267905, 43.110194350798075],
             [-87.99058742709708, 43.108596502610474],
             [-87.99056233697672, 43.110561518354096],
             [-87.9905569725587, 43.11080823971467],
             [-87.9857875753471, 42.92379589578332],
             [-87.9857701409885, 42.92391766829422],
             [-87.98610139380185, 42.924293786707175],
             [-87.98599946985928, 42.92421522430411],
             [-87.99100676159652, 42.92232437040128],
             [-87.99113014321121, 42.92227330321821],
             [-87.99075463394912, 42.92209653187314],
             [-87.99219766239914, 42.922021894930715],
             [-87.9921547470549, 42.92185690768452],
             [-87.99236395935806, 42.92199046882265],
             [-87.99243369679245, 42.92252078224922],
             [-87.99268046002182, 42.92261898793842],
             [-87.99317398648056, 42.922336155129805],
             [-87.99367287735733, 42.92228115971068],
             [-87.84564946649299, 42.9293707200258],
             [-87.84566019532905, 42.92984205349201],
             [-87.84906660077796, 42.92782707767539],
             [-87.84873400686011, 42.92779958242282],
             [-87.84897540567145, 42.92760711531117]]),
        {
          "class_2010": 4,
          "system:index": "0"
        }),
    soil = /* color: #ae9161 */ee.Feature(
        ee.Geometry.MultiPoint(),
        {
          "class_2010": 2,
          "system:index": "0"
        });
/***** End of imports. If edited, may not auto-convert in the playground. *****/



var milwaukeeExport = ee.Geometry.Polygon(
        [[[-88.35575750089527, 43.35209206347098],
          [-88.35575750089527, 42.80743795582355],
          [-87.76249578214527, 42.80743795582355],
          [-87.76249578214527, 43.35209206347098]]], null, false),
    wb = ee.Image("users/erker/milwaukee/milwaukee_water/mke_water_bodies_26916_input"),
    wl = ee.Image("users/erker/milwaukee/milwaukee_water/mke_water_lines_26916_input"),
    height = ee.Image("users/erker/milwaukee/milwaukee_height/mke_2010height");

var pts = ee.FeatureCollection('users/erker/milwaukee/milwaukee_shapefiles/milwaukee_accuracy_training');

var classProperty = 'class_2010';

var pts = pts.remap(['G','I','S','T','W'], [0,1,2,3,4], classProperty);


var testpts = ee.FeatureCollection('users/erker/milwaukee/milwaukee_shapefiles/milwaukee_accuracy_testing').filter(ee.Filter.neq(classProperty, '')).remap(['G','I','S','T','W'], [0,1,2,3,4], classProperty);
// var testpts = testpts.randomColumn();
// // testpts =  testpts.filter(ee.Filter.lt('random', 0.2));
// // print(testpts.size());



var buf3000 = function(feature) {return feature.buffer(3000)};
var urbanregion = testpts.map(buf3000);
var naip = ee.ImageCollection('USDA/NAIP/DOQQ').filterBounds(urbanregion); 
var naip05c = naip.filterDate('2005-01-01', '2005-12-31');
var naip08c = naip.filterDate('2008-01-01', '2008-12-31');
var naip10c = naip.filterDate('2010-01-01', '2010-12-31');




var naip05 = naip05c.median().byte();
var naip08 = naip08c.median().byte();
var naip10 = naip10c.median().byte();



var ndvi10 = naip10.normalizedDifference(['N', 'R']);
var gauss53 = ee.Kernel.gaussian({radius: 5, sigma: 3, units: 'pixels', normalize:true});
var naip10Gauss53 = naip10.convolve(gauss53);
var naip08Gauss53 = naip08.convolve(gauss53);
var heightGauss53 = height.convolve(gauss53);
var gauss104 = ee.Kernel.gaussian({radius: 10, sigma: 4, units: 'pixels', normalize:true});
var naip10Gauss104 = naip10.convolve(gauss104);
var naip08Gauss104 = naip08.convolve(gauss104);
var win10 = ee.Kernel.square({radius: 10});
var entro10 = naip10.select('N').entropy(win10);
var win5 = ee.Kernel.square({radius: 5});
var entro5 = naip10.select('N').entropy(win5);
var nir10glcm3 = naip10.select(['N']).glcmTexture({size: 3, average: false});
var contrast3 = nir10glcm3.select('N_contrast_-1_-1', 'N_contrast_0_-1', 'N_contrast_1_-1', 'N_contrast_-1_0');
var nir10glcm7 = naip10.select(['N']).glcmTexture({size: 7, average: false});
var contrast7 = nir10glcm7.select('N_contrast_-1_-1', 'N_contrast_0_-1', 'N_contrast_1_-1', 'N_contrast_-1_0');
var nir10glcm14 = naip10.select(['N']).glcmTexture({size: 14, average: false});
var contrast14 = nir10glcm14.select('N_contrast_-1_-1', 'N_contrast_0_-1', 'N_contrast_1_-1', 'N_contrast_-1_0');

// var image = ee.Image.cat([naip05, naip08, naip10, ndvi10, naip10Gauss53, entro10, entro5, contrast7, contrast14, wl, wb, height, heightGauss104]);
var image = ee.Image.cat([naip08, naip10, entro5, contrast3, contrast7, wl, wb, height, heightGauss53]);
//var image = ee.Image.cat([naip10, contrast3, height, heightGauss104, wb, wl]);

// // var training = image.sampleRegions({
// //   collection: trainingData,
// //   properties: [classProperty],
// //   scale: 1
// // });




var trainingGrass = image.sampleRegions({collection: grass, properties: [classProperty], scale: 1}).randomColumn().filter(ee.Filter.lt('random', 0.02));
print(trainingGrass.size());

var trainingImpervious = image.sampleRegions({collection: impervious, properties: [classProperty], scale: 1}).randomColumn().filter(ee.Filter.lt('random', 0.026));
print(trainingImpervious.size());

var trainingSoil = image.sampleRegions({collection: soil, properties: [classProperty], scale: 1}).randomColumn().filter(ee.Filter.lt('random', 0.002));
print(trainingSoil.size());

var trainingTree = image.sampleRegions({collection: tree, properties: [classProperty], scale: 1}).randomColumn().filter(ee.Filter.lt('random', 0.045));
print(trainingTree.size());

var trainingWater = image.sampleRegions({collection: water, properties: [classProperty], scale: 1}).randomColumn().filter(ee.Filter.lt('random', 0.01));
print(trainingWater.size());


var trainingPts = image.sampleRegions({collection: pts, properties: [classProperty], scale: 1}); //.randomColumn().filter(ee.Filter.lt('random', 0.));

var training = trainingPts.merge(trainingGrass).merge(trainingTree).merge(trainingSoil).merge(trainingImpervious).merge(trainingWater);
print(training.size());


var trainedClassifier = ee.Classifier.smileRandomForest(20).train({
  features: training,
  classProperty: classProperty,
  inputProperties: image.bandNames()
});

print(trainedClassifier);

var testing = image.sampleRegions({collection: testpts, properties: [classProperty], scale: 1});

var testClassified = testing.classify(trainedClassifier);
var testAccuracy = testClassified.errorMatrix(classProperty, 'classification');
print('testing error matrix: ', testAccuracy);
print('testing overall accuracy: ', testAccuracy.accuracy());

var valpts = ee.FeatureCollection('users/erker/milwaukee/milwaukee_shapefiles/milwaukee_accuracy_validation').filter(ee.Filter.neq(classProperty, '')).remap(['G','I','S','T','W'], [0,1,2,3,4], classProperty);
var validation = image.sampleRegions({collection: valpts, properties: [classProperty], scale: 1});
var valClassified = validation.classify(trainedClassifier);
var valAccuracy = valClassified.errorMatrix(classProperty, 'classification');
print('validation error matrix: ', valAccuracy);
print('validation overall accuracy: ', valAccuracy.accuracy());


var classified = image.classify(trainedClassifier);


Map.addLayer(height);
Map.addLayer(naip05);
Map.addLayer(naip08);
Map.addLayer(naip10);
Map.addLayer(classified, {min: 0, max: 4, palette: ['yellow', 'red', 'brown','green','blue']});

//Map.addLayer(errors);




Export.image.toDrive({
  image: classified,
  description: 'milwaukee-2010-fullcounty',
  scale: 1,
  maxPixels: 12000000000,
  region: milwaukeeExport,
  crs: 'EPSG:26916'
});


Export.image.toAsset({
  image: classified,
  description: 'milwaukeeClassified2010',
  assetId: 'milwaukeeClassified2010',
  scale: 1,
  maxPixels: 12000000000,
  region: milwaukeeExport,
  pyramidingPolicy: {
    'classification': 'mode'
  }
});