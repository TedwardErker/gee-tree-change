/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var grass = /* color: #fffe58 */ee.Feature(
        ee.Geometry({
          "type": "GeometryCollection",
          "geometries": [
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.32720461202135,
                    45.00925300171725
                  ],
                  [
                    -90.32744601083269,
                    45.00914680871438
                  ],
                  [
                    -90.32714023900499,
                    45.00918094220105
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.31944229913225,
                    45.00913922349235
                  ],
                  [
                    -90.3185518057393,
                    45.00918094220105
                  ],
                  [
                    -90.31993046117296,
                    45.00918094220105
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.32370969367494,
                    45.00981240803559
                  ],
                  [
                    -90.32322421384325,
                    45.00992428864364
                  ],
                  [
                    -90.32436147046556,
                    45.00987498535175
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.34382022405748,
                    45.00601225159918
                  ],
                  [
                    -90.3437880375493,
                    45.0053143687792
                  ],
                  [
                    -90.34355200315599,
                    45.00548125457482
                  ],
                  [
                    -90.34356809641008,
                    45.00598949468479
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.32018720716876,
                    45.01320870311262
                  ],
                  [
                    -90.31882464498919,
                    45.01331488858444
                  ],
                  [
                    -90.32005846113604,
                    45.01337177357763
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.33939678811325,
                    45.008636496199856
                  ],
                  [
                    -90.33912320280368,
                    45.008499961112804
                  ],
                  [
                    -90.33809859980784,
                    45.008553058205045
                  ],
                  [
                    -90.33764262423057,
                    45.008685800534934
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.35212244908153,
                    45.01298415158922
                  ],
                  [
                    -90.35293247620403,
                    45.01254044414067
                  ],
                  [
                    -90.35245504299938,
                    45.0125745756049
                  ]
                ]
              ],
              "geodesic": true,
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.3329923001877,
                    45.013304455780265
                  ],
                  [
                    -90.33267848173296,
                    45.01330824811561
                  ],
                  [
                    -90.3323995319954,
                    45.01337271777776
                  ],
                  [
                    -90.33300839344179,
                    45.01337082161228
                  ]
                ]
              ],
              "geodesic": true,
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.3322546927086,
                    45.0131451774697
                  ],
                  [
                    -90.33164851347124,
                    45.01315465833394
                  ],
                  [
                    -90.33166460672533,
                    45.01337840627387
                  ],
                  [
                    -90.33226273933565,
                    45.013361340783845
                  ]
                ]
              ],
              "geodesic": true,
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.35216227640272,
                    45.015208139779276
                  ],
                  [
                    -90.35213545431257,
                    45.01512091889687
                  ],
                  [
                    -90.35106257070662,
                    45.015151256610146
                  ],
                  [
                    -90.35110012163283,
                    45.01522710082308
                  ]
                ]
              ],
              "geodesic": true,
              "evenOdd": true
            }
          ],
          "coordinates": []
        }),
        {
          "class_2017": 0,
          "system:index": "0"
        }),
    tree = /* color: #2ca919 */ee.Feature(
        ee.Geometry({
          "type": "GeometryCollection",
          "geometries": [
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.31949444564827,
                    45.00817705203298
                  ],
                  [
                    -90.31952126773842,
                    45.00796845452964
                  ],
                  [
                    -90.31849666389473,
                    45.00795707646215
                  ],
                  [
                    -90.318003137436,
                    45.00808982044217
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.3188813596075,
                    45.00697863352379
                  ],
                  [
                    -90.31800695946865,
                    45.006840197823706
                  ],
                  [
                    -90.31802305272274,
                    45.00708293417274
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.32168695023708,
                    45.00724981481601
                  ],
                  [
                    -90.32170304349117,
                    45.00699190816239
                  ],
                  [
                    -90.32159307292156,
                    45.00698811540882
                  ],
                  [
                    -90.32156625083141,
                    45.00724602207951
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.32103170300319,
                    45.00554920034261
                  ],
                  [
                    -90.32077957535579,
                    45.00529128603215
                  ],
                  [
                    -90.32067228699519,
                    45.00556057888838
                  ]
                ]
              ],
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.34505978693129,
                    45.01384591829587
                  ],
                  [
                    -90.34415320028425,
                    45.01382506064428
                  ],
                  [
                    -90.3436046899205,
                    45.014123703177326
                  ],
                  [
                    -90.34373745904281,
                    45.01426686169839
                  ],
                  [
                    -90.34364358057142,
                    45.01434460352183
                  ],
                  [
                    -90.34375891555906,
                    45.01457403519001
                  ]
                ]
              ],
              "geodesic": true,
              "evenOdd": true
            },
            {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    -90.34548625812114,
                    45.01428771947918
                  ],
                  [
                    -90.34556404220744,
                    45.01441096816778
                  ],
                  [
                    -90.34570351714088,
                    45.01435029191261
                  ],
                  [
                    -90.34571961035893,
                    45.01407914423138
                  ]
                ]
              ],
              "geodesic": true,
              "evenOdd": true
            }
          ],
          "coordinates": []
        }),
        {
          "class_2017": 3,
          "system:index": "0"
        }),
    soil = /* color: #d6b257 */ee.Feature(
        ee.Geometry.MultiPolygon(
            [[[[-90.34585640300871, 45.014183431965556],
               [-90.34577057232023, 45.014183431965556],
               [-90.34584835638167, 45.01439011070262]]],
             [[[-90.34690112342001, 45.01436356485155],
               [-90.34690112342001, 45.01425738132414],
               [-90.34687832464338, 45.01425927746031],
               [-90.34687296022535, 45.01436735711674]]],
             [[[-90.34622520674826, 45.01423936802765],
               [-90.34619302024008, 45.01424600450597],
               [-90.34620106686712, 45.01436261678522],
               [-90.3462332533753, 45.01436072065248]]]]),
        {
          "class_2017": 2,
          "system:index": "0"
        });
/***** End of imports. If edited, may not auto-convert in the playground. *****/
var pts = ee.FeatureCollection('users/erker/UTC/marathon_combined_sub_1k');
var pts = pts.remap([1,2,3,4,5], [0,1,2,3,4], 'class_2017');


var pts2 = pts.merge(grass).merge(tree).merge(soil);
print(pts2);

var naip = ee.ImageCollection('USDA/NAIP/DOQQ').filterBounds(pts);
var naip17c = naip.filterDate('2017-01-01', '2017-12-31');
var naip17 = naip17c.median().byte()
Map.addLayer(naip17);

var image = ee.Image.cat([naip17]); //gradient, direction]); 


var classProperty = 'class_2017';

var training = image.sampleRegions({
  collection: pts2,
  properties: [classProperty],
  scale: 1
});
// print(training);

var trainedClassifier = ee.Classifier.smileRandomForest(100).train({
  features: training,
  classProperty: classProperty,
  inputProperties: image.bandNames()
});

// print(trainedClassifier);


var classified = image.classify(trainedClassifier);
Map.addLayer(classified, {min: 0, max: 4, palette: ['yellow', 'red', 'brown','green','blue']});




